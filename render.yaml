services:
  - type: web
    name: TravelLand (single-service)
    env: python
    region: oregon
    plan: free
    buildCommand: |
      pip install --no-cache-dir -r city_guides/requirements.txt && \
      mkdir -p city_guides/static && \
      mkdir -p ../city_guides/static && \
      cd frontend && \
      npm ci && \
      npm run build && \
      cp -R dist/. ../city_guides/static/ && \
      cp public/marcos.png ../city_guides/static/ || true
    envVars:
      - key: NODE_VERSION
        value: "18"
    startCommand: |
      bash start_server.sh
    # Environment variables are configured in the Render dashboard; keep secrets out of the manifest
    healthCheckPath: /health
    services:
      - name: web
        protocol: http